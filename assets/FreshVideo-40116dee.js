import{_ as E,r as _,a as m,b as r,c as d,e as s,w as l,u as i,i as Y,h as f,d as b,t as x,F as O,q as F,k as U,s as q,m as C,l as K,p as P,n as R}from"./index-53141937.js";const M=h=>(P("data-v-69dd332a"),h=h(),R(),h),W={class:"content"},G=M(()=>b("label",null,"视频关键词：",-1)),J=M(()=>b("label",null,"正在观看人数（大于）：",-1)),Q={key:0},X={key:1},Z=["src"],$=["innerHTML"],ee={key:3},te={key:5},ae={__name:"FreshVideo",setup(h){let v=_([]),I=_([]),y=_(""),c=_(0),k=_(!1),g=_(1),N=[{title:"序号",dataIndex:"no",key:"no",width:60},{title:"视频封面",dataIndex:"pic",key:"pic",width:160},{title:"标题",dataIndex:"title",key:"title",width:160},{title:"作者",dataIndex:"author",key:"author",width:120},{title:"在线观看人数",dataIndex:"online",key:"online",width:120},{title:"评论数",dataIndex:"reply",key:"reply",width:120},{title:"最近评论时间",dataIndex:"lastCommentTime",key:"lastCommentTime",width:120},{title:"播放量",dataIndex:"play",key:"play",width:90},{title:"点赞数",dataIndex:"like",key:"like",width:90},{title:"发布时间",dataIndex:"pubdate",key:"pubdate",width:90},{title:"操作",dataIndex:"operate",key:"operate",width:180}];const V=async function(){try{const t={key:y.value,pn:g.value,ps:20};k.value=!0;const e=await q(t);if(e.success){const o=e.data.result;o.forEach(n=>{var w;const u=(w=n.comment)==null?void 0:w.replies;Array.isArray(u)&&u.length?(n.lastComment=u[0],n.lastCommentTime=F(n.lastComment.ctime*1e3).format("YYYY-MM-DD HH:mm:ss")):n.lastCommentTime="无评论"}),v.value=o,T(),I.value=o,k.value=!1}else C.error("未查询到视频")}catch(t){k.value=!1,console.log(t)}},S=function(t,e,o){return t.filter(n=>n[e]>=o)},H=function(){if(isNaN(parseInt(c.value))){C.error("请输入数字");return}v.value=S(I.value,"online",c.value),T()},T=function(){v.value.sort((t,e)=>e.online-t.online)},D=function(t){const e=t.arcurl;K(e).then(()=>{C.success("成功复制视频链接到剪切板")})},B=function(t){const e=t.arcurl;window.open(e)},L=function(t){g.value=t.current,V()};return(t,e)=>{const o=m("a-input"),n=m("a-button"),u=m("a-row"),w=m("a-table"),j=m("a-spin");return r(),d("div",W,[s(u,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:l(()=>[G,s(o,{value:i(y),"onUpdate:value":e[0]||(e[0]=a=>Y(y)?y.value=a:y=a),class:"key-word",placeholder:"请输入关键词"},null,8,["value"]),s(n,{class:"button",type:"primary",loading:i(k),onClick:V},{default:l(()=>[f(" 查询 ")]),_:1},8,["loading"])]),_:1}),s(u,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:l(()=>[J,s(o,{value:i(c),"onUpdate:value":e[1]||(e[1]=a=>Y(c)?c.value=a:c=a),class:"key-word",placeholder:"请输入数量"},null,8,["value"]),s(n,{class:"button",type:"primary",onClick:H},{default:l(()=>[f(" 过滤 ")]),_:1})]),_:1}),s(j,{spinning:i(k)},{default:l(()=>[s(w,{style:{width:"100%"},columns:i(N),"data-source":i(v),pagination:{total:1e3,current:i(g).value,pageSize:20,showSizeChanger:!1},rowKey:"id",onChange:e[2]||(e[2]=a=>L(a))},{bodyCell:l(({column:a,record:p,index:z})=>[a.key==="operate"?(r(),d("span",Q,[s(n,{type:"link",onClick:A=>D(p)},{default:l(()=>[f("复制链接")]),_:2},1032,["onClick"]),s(n,{type:"link",onClick:A=>B(p)},{default:l(()=>[f("打开")]),_:2},1032,["onClick"])])):a.key==="pic"?(r(),d("div",X,[b("img",{class:"cover",src:p.pic},null,8,Z)])):a.key==="title"?(r(),d("span",{key:2,innerHTML:p.title},null,8,$)):a.key==="reply"?(r(),d("span",ee,x(p.stat.reply||"无评论或up主未开放评论区"),1)):a.key==="pubdate"?(r(),d(O,{key:4},[f(x(i(F)(p.pubdate*1e3).format("YYYY-MM-DD HH:mm:ss")),1)],64)):a.key==="no"?(r(),d("span",te,x(z+1),1)):U("",!0)]),_:1},8,["columns","data-source","pagination"])]),_:1},8,["spinning"])])}}},se=E(ae,[["__scopeId","data-v-69dd332a"]]);export{se as default};
