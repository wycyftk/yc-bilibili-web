import{_ as E,r as _,a as m,b as r,c,e as s,w as l,u as i,i as I,h as f,d as x,t as w,F as O,q as V,k as U,s as q,m as T,l as z,p as K,n as R}from"./index-d78bb191.js";const Y=h=>(K("data-v-a9f40734"),h=h(),R(),h),W={class:"content"},G=Y(()=>x("label",null,"视频关键词：",-1)),J=Y(()=>x("label",null,"正在观看人数（大于）：",-1)),P={key:0},Q={key:1},X=["src"],Z=["innerHTML"],$={key:3},ee={key:5},te={__name:"FreshVideo",setup(h){let v=_([]),g=_([]),y=_(""),d=_(0),k=_(!1),C=_(1),F=[{title:"序号",dataIndex:"no",key:"no",width:60},{title:"视频封面",dataIndex:"pic",key:"pic",width:160},{title:"标题",dataIndex:"title",key:"title",width:160},{title:"作者",dataIndex:"author",key:"author",width:120},{title:"在线观看人数",dataIndex:"online",key:"online",width:120},{title:"评论数",dataIndex:"reply",key:"reply",width:120},{title:"最近评论时间",dataIndex:"lastCommentTime",key:"lastCommentTime",width:120},{title:"播放量",dataIndex:"play",key:"play",width:90},{title:"点赞数",dataIndex:"like",key:"like",width:90},{title:"发布时间",dataIndex:"pubdate",key:"pubdate",width:90},{title:"操作",dataIndex:"operate",key:"operate",width:180}];const M=async function(){try{const t={key:y.value,pn:C.value,ps:20};k.value=!0;const e=await q(t);if(e.success){const o=e.data.result;o.forEach(a=>{const u=a.comment.replies;Array.isArray(u)&&u.length?(a.lastComment=u[0],a.lastCommentTime=V(a.lastComment.ctime*1e3).format("YYYY-MM-DD HH:mm:ss")):a.lastCommentTime="无评论"}),v.value=o,b(),g.value=o,k.value=!1}}catch(t){k.value=!1,console.log(t)}},N=function(t,e,o){return t.filter(a=>a[e]>=o)},H=function(){if(isNaN(parseInt(d.value))){T.error("请输入数字");return}v.value=N(g.value,"online",d.value),b()},b=function(){v.value.sort((t,e)=>e.online-t.online)},S=function(t){const e=t.arcurl;z(e).then(()=>{T.success("成功复制视频链接到剪切板")})},D=function(t){const e=t.arcurl;window.open(e)};return(t,e)=>{const o=m("a-input"),a=m("a-button"),u=m("a-row"),B=m("a-table"),L=m("a-spin");return r(),c("div",W,[s(u,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:l(()=>[G,s(o,{value:i(y),"onUpdate:value":e[0]||(e[0]=n=>I(y)?y.value=n:y=n),class:"key-word",placeholder:"请输入关键词"},null,8,["value"]),s(a,{class:"button",type:"primary",loading:i(k),onClick:M},{default:l(()=>[f(" 查询 ")]),_:1},8,["loading"])]),_:1}),s(u,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:l(()=>[J,s(o,{value:i(d),"onUpdate:value":e[1]||(e[1]=n=>I(d)?d.value=n:d=n),class:"key-word",placeholder:"请输入数量"},null,8,["value"]),s(a,{class:"button",type:"primary",onClick:H},{default:l(()=>[f(" 过滤 ")]),_:1})]),_:1}),s(L,{spinning:i(k)},{default:l(()=>[s(B,{style:{width:"100%"},columns:i(F),"data-source":i(v),pagination:{total:1e3,current:i(C).value,pageSize:20},rowKey:"id"},{bodyCell:l(({column:n,record:p,index:j})=>[n.key==="operate"?(r(),c("span",P,[s(a,{type:"link",onClick:A=>S(p)},{default:l(()=>[f("复制链接")]),_:2},1032,["onClick"]),s(a,{type:"link",onClick:A=>D(p)},{default:l(()=>[f("打开")]),_:2},1032,["onClick"])])):n.key==="pic"?(r(),c("div",Q,[x("img",{class:"cover",src:p.pic},null,8,X)])):n.key==="title"?(r(),c("span",{key:2,innerHTML:p.title},null,8,Z)):n.key==="reply"?(r(),c("span",$,w(p.stat.reply),1)):n.key==="pubdate"?(r(),c(O,{key:4},[f(w(i(V)(p.pubdate*1e3).format("YYYY-MM-DD HH:mm:ss")),1)],64)):n.key==="no"?(r(),c("span",ee,w(j+1),1)):U("",!0)]),_:1},8,["columns","data-source","pagination"])]),_:1},8,["spinning"])])}}},ne=E(te,[["__scopeId","data-v-a9f40734"]]);export{ne as default};
