import{_ as B,r as f,a as p,o as k,c as h,b as n,w as o,u as d,i as x,d as m,e as I,t as O,f as T,g as L,m as g,h as D,j as E,p as K,k as M}from"./index-1be42c7a.js";const P=_=>(K("data-v-18aa2d65"),_=_(),M(),_),R={class:"content"},W=P(()=>I("label",null,"正在观看人数（大于）：",-1)),q={key:0},z={key:1},A=["src"],G={key:2},H={__name:"FreshVideo",setup(_){let y=f([]),r=f(""),i=f(0),u=f(!1),b=[{title:"序号",dataIndex:"no",key:"no",width:90},{title:"视频封面",dataIndex:"pic",key:"pic",width:120},{title:"标题",dataIndex:"title",key:"title",width:90},{title:"在线观看人数",dataIndex:"onlineUser",key:"onlineUser",width:90},{title:"播放量",dataIndex:"play",key:"play",width:90},{title:"点赞量",dataIndex:"like",key:"like",width:90},{title:"投币数",dataIndex:"coin",key:"coin",width:90},{title:"收藏数",dataIndex:"favorite",key:"favorite",width:90},{title:"发布时间",dataIndex:"title",key:"title",width:90},{title:"操作",dataIndex:"title",key:"title",width:90}];const V=async function(){try{const t={key:r.value};u.value=!0;const e=await L(t);if(e.success){const a=e.data.result,l=a.map(async c=>U(c)).filter((c,v)=>v===0);Promise.all(l).then(()=>{y.value=a}).finally(()=>{u.value=!1})}}catch(t){u.value=!1,console.log(t)}},C=function(t,e,a){return t.filter(l=>l[e]>=a)},N=function(){if(isNaN(parseInt(i.value))){g.error("请输入数字");return}y.value=C(y.value,"",i.value)},U=async function(t){const e={bvid:t.bvid,cid:t.id},a=await D(e);a.success&&(t.onlineUser=a.data.total)},S=function(t){const e=t.arcurl;E(e).then(()=>{g.success("成功复制视频链接到剪切板")})};return(t,e)=>{const a=p("a-input"),l=p("a-button"),c=p("a-row"),v=p("a-table"),F=p("a-spin");return k(),h("div",R,[n(c,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:o(()=>[n(a,{value:d(r),"onUpdate:value":e[0]||(e[0]=s=>x(r)?r.value=s:r=s),class:"key-word",placeholder:"请输入关键词"},null,8,["value"]),n(l,{class:"button",type:"primary",loading:d(u),onClick:V},{default:o(()=>[m(" 查询 ")]),_:1},8,["loading"])]),_:1}),n(c,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:o(()=>[W,n(a,{value:d(i),"onUpdate:value":e[1]||(e[1]=s=>x(i)?i.value=s:i=s),class:"key-word",placeholder:"请输入数量"},null,8,["value"]),n(l,{class:"button",type:"primary",onClick:N},{default:o(()=>[m(" 过滤 ")]),_:1})]),_:1}),n(c,null,{default:o(()=>[n(F,{spinning:d(u)},{default:o(()=>[n(v,{style:{width:"100%"},columns:d(b),"data-source":d(y),rowKey:"id"},{bodyCell:o(({column:s,record:w,index:j})=>[s.key==="operate"?(k(),h("span",q,[n(l,{type:"link",onClick:J=>S(w)},{default:o(()=>[m("复制链接")]),_:2},1032,["onClick"])])):s.key==="pic"?(k(),h("div",z,[I("img",{class:"cover",src:w.pic},null,8,A)])):s.key==="no"?(k(),h("span",G,O(j+1),1)):T("",!0)]),_:1},8,["columns","data-source"])]),_:1},8,["spinning"])]),_:1})])}}},X=B(H,[["__scopeId","data-v-18aa2d65"]]);export{X as default};
