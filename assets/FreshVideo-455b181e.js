import{_ as A,r as _,a as m,o as r,c,b as s,w as l,u as i,i as b,d as f,e as T,t as w,F as E,f as I,g as O,h as U,m as V,j as z,p as K,k as R}from"./index-08bed1d1.js";const W=h=>(K("data-v-14946905"),h=h(),R(),h),q={class:"content"},G=W(()=>T("label",null,"正在观看人数（大于）：",-1)),J={key:0},P={key:1},Q=["src"],X=["innerHTML"],Z={key:3},$={key:5},ee={__name:"FreshVideo",setup(h){let v=_([]),x=_([]),y=_(""),d=_(0),k=_(!1),g=_(1),Y=[{title:"序号",dataIndex:"no",key:"no",width:60},{title:"视频封面",dataIndex:"pic",key:"pic",width:160},{title:"标题",dataIndex:"title",key:"title",width:160},{title:"作者",dataIndex:"author",key:"author",width:120},{title:"在线观看人数",dataIndex:"online",key:"online",width:120},{title:"评论数",dataIndex:"reply",key:"reply",width:120},{title:"最近评论时间",dataIndex:"lastCommentTime",key:"lastCommentTime",width:120},{title:"播放量",dataIndex:"play",key:"play",width:90},{title:"点赞数",dataIndex:"like",key:"like",width:90},{title:"发布时间",dataIndex:"pubdate",key:"pubdate",width:90},{title:"操作",dataIndex:"operate",key:"operate",width:180}];const F=async function(){try{const t={key:y.value,pn:g.value,ps:20};k.value=!0;const e=await U(t);if(e.success){const o=e.data.result;o.forEach(a=>{const u=a.comment.replies;Array.isArray(u)&&u.length?(a.lastComment=u[0],a.lastCommentTime=I(a.lastComment.ctime*1e3).format("YYYY-MM-DD HH:mm:ss")):a.lastCommentTime="无评论"}),v.value=o,C(),x.value=o,k.value=!1}}catch(t){k.value=!1,console.log(t)}},M=function(t,e,o){return t.filter(a=>a[e]>=o)},N=function(){if(isNaN(parseInt(d.value))){V.error("请输入数字");return}v.value=M(x.value,"online",d.value),C()},C=function(){v.value.sort((t,e)=>e.online-t.online)},H=function(t){const e=t.arcurl;z(e).then(()=>{V.success("成功复制视频链接到剪切板")})},S=function(t){const e=t.arcurl;window.open(e)};return(t,e)=>{const o=m("a-input"),a=m("a-button"),u=m("a-row"),D=m("a-table"),j=m("a-spin");return r(),c("div",q,[s(u,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:l(()=>[s(o,{value:i(y),"onUpdate:value":e[0]||(e[0]=n=>b(y)?y.value=n:y=n),class:"key-word",placeholder:"请输入关键词"},null,8,["value"]),s(a,{class:"button",type:"primary",loading:i(k),onClick:F},{default:l(()=>[f(" 查询 ")]),_:1},8,["loading"])]),_:1}),s(u,{class:"actions-bar",type:"flex",justify:"flex-start"},{default:l(()=>[G,s(o,{value:i(d),"onUpdate:value":e[1]||(e[1]=n=>b(d)?d.value=n:d=n),class:"key-word",placeholder:"请输入数量"},null,8,["value"]),s(a,{class:"button",type:"primary",onClick:N},{default:l(()=>[f(" 过滤 ")]),_:1})]),_:1}),s(j,{spinning:i(k)},{default:l(()=>[s(D,{style:{width:"100%"},columns:i(Y),"data-source":i(v),pagination:{total:1e3,current:i(g).value,pageSize:20},rowKey:"id"},{bodyCell:l(({column:n,record:p,index:B})=>[n.key==="operate"?(r(),c("span",J,[s(a,{type:"link",onClick:L=>H(p)},{default:l(()=>[f("复制链接")]),_:2},1032,["onClick"]),s(a,{type:"link",onClick:L=>S(p)},{default:l(()=>[f("打开")]),_:2},1032,["onClick"])])):n.key==="pic"?(r(),c("div",P,[T("img",{class:"cover",src:p.pic},null,8,Q)])):n.key==="title"?(r(),c("span",{key:2,innerHTML:p.title},null,8,X)):n.key==="reply"?(r(),c("span",Z,w(p.stat.reply),1)):n.key==="pubdate"?(r(),c(E,{key:4},[f(w(i(I)(p.pubdate*1e3).format("YYYY-MM-DD HH:mm:ss")),1)],64)):n.key==="no"?(r(),c("span",$,w(B+1),1)):O("",!0)]),_:1},8,["columns","data-source","pagination"])]),_:1},8,["spinning"])])}}},ae=A(ee,[["__scopeId","data-v-14946905"]]);export{ae as default};
